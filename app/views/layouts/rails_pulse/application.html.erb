<!DOCTYPE html>
<html data-color-scheme="light">
  <head>
    <title><%= content_for(:title) || "Rails Pulse" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <!-- Rails Pulse Pre-compiled Assets (CSP-safe) -->
    <%= stylesheet_link_tag rails_pulse.asset_path('rails-pulse.css'), 'data-turbo-track': 'reload' %>
    <%= javascript_include_tag rails_pulse.asset_path('rails-pulse-icons.js'), 'data-turbo-track': 'reload', defer: true, nonce: rails_pulse_csp_nonce %>
    <%= javascript_include_tag rails_pulse.asset_path('rails-pulse.js'), 'data-turbo-track': 'reload', defer: true, nonce: rails_pulse_csp_nonce %>
  </head>

  <body class="header-layout">
    <header id="header">
      <div class="flex justify-between container mis-2">
        <div class="hide@md" data-controller="rails-pulse--dialog">
          <button type="button" class="btn btn--icon" data-action="rails-pulse--dialog#showModal">
            <%= rails_pulse_icon 'menu', width: '20' %>
            <span class="sr-only">Open menu</span>
          </button>

        <dialog class="sheet sheet--left" style="--sheet-size: 288px;" data-rails-pulse--dialog-target="menu" data-action="click->rails-pulse--dialog#closeOnClickOutside">
          <div class="sheet__content p-2">
            <div class="sidebar-menu">
              <%= link_to rails_pulse.root_path, class: "btn sidebar-menu__button" do %>
                <div class="flex flex-col text-start leading-tight overflow-hidden">
                  <span class="overflow-ellipsis font-semibold">Rails Pulse</span>
                  <span class="overflow-ellipsis text-xs">Open Source</span>
                </div>
              <% end %>
              <div class="sidebar-menu__content">
                <div class="sidebar-menu__group">
                  <nav class="sidebar-menu__items">
                    <%= render 'layouts/rails_pulse/menu_items' %>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </dialog>
      </div>

      <div class="flex items-center gap">
        <%= link_to rails_pulse.root_path, class: "flex items-center gap mie-2" do %>
          <span class="font-bold">Rails Pulse</span>
        <% end %>
        <nav class="flex items-center gap text-sm text-subtle show@md" style="--column-gap: 1rem">
          <%= render 'layouts/rails_pulse/menu_items' %>
        </nav>
      </div>

      <div class="flex items-center" data-controller="rails-pulse--color-scheme">
        <%= link_to '#', "aria-label": "Toggle color scheme", role: "button", data: { action: "rails-pulse--color-scheme#toggle" } do %>
          <%= rails_pulse_icon 'sun', width: '48' %>
        <% end %>
      </div>
    </header>

    <main id="main">
      <div class="container flex flex-col gap">
        <%= yield %>
      </div>
    </main>

  </body>
</html>
